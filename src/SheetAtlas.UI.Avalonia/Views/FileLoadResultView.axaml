<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:SheetAtlas.UI.Avalonia.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="300"
             x:Class="SheetAtlas.UI.Avalonia.Views.FileLoadResultView"
             x:DataType="vm:FileLoadResultViewModel">

    <Expander>
        <Expander.Header>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Status Indicator -->
                <Rectangle Grid.Column="0"
                          Width="4" Height="24"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Center"
                          Fill="LightBlue"/>

                <!-- File Info -->
                <StackPanel Grid.Column="1" Margin="12,0,4,0">
                    <TextBlock Text="{Binding FileName}" FontWeight="Medium"/>
                    <TextBlock Text="{Binding FilePath}" FontSize="10"
                              Foreground="Gray" TextTrimming="CharacterEllipsis"/>

                    <!-- Status Summary -->
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="ðŸ“Š" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <TextBlock Text="{Binding Status}" FontSize="12" FontWeight="Medium"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Expander.Header>

        <!-- Error Details -->
        <StackPanel Margin="16,8,0,0">
            <!-- Errors List -->
            <TextBlock Text="Issues" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,4"/>

            <ItemsControl ItemsSource="{Binding Errors}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="LightYellow"
                               BorderBrush="Orange" BorderThickness="1"
                               Margin="0,2" Padding="8,4">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Level}" FontWeight="Medium"
                                              Foreground="DarkOrange" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Message}" TextWrapping="Wrap"/>
                                </StackPanel>
                                <TextBlock Text="{Binding Context}" FontSize="10"
                                          Foreground="Gray" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Expander>
</UserControl>